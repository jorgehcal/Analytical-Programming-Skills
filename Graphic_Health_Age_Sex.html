<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.8.1"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300, "strokeWidth": 0}, "title": {"color": "black", "dx": 70, "dy": -20}}, "hconcat": [{"facet": {"column": {"type": "nominal", "field": "Age", "header": {"labelFontSize": 15}, "title": null}, "row": {"type": "nominal", "field": "Sex", "header": {"labelFontSize": 15}, "title": null}}, "spec": {"mark": "bar", "encoding": {"color": {"type": "nominal", "field": "Health", "legend": {"labelLimit": 0, "symbolSize": 400, "symbolType": "square", "title": ""}, "scale": {"reverse": true, "scheme": "spectral"}, "sort": {"field": "order", "order": "descending"}}, "opacity": {"condition": {"value": 1, "selection": "selector001"}, "value": 0.2}, "order": {"type": "quantitative", "field": "order"}, "tooltip": [{"type": "quantitative", "field": "Est", "title": "Estimation"}, {"type": "quantitative", "field": "lim_inf", "title": "Inferior Limit"}, {"type": "quantitative", "field": "lim_sup", "title": "Superior Limit"}], "x": {"type": "nominal", "axis": {"labelAngle": 0}, "field": "M", "title": null}, "y": {"type": "quantitative", "field": "Est", "title": "Percentage Estimation"}}, "height": 180, "selection": {"selector001": {"type": "multi", "fields": ["Health"], "bind": "legend"}}, "transform": [{"filter": {"selection": "selector001"}}], "width": 180}, "title": "Health in the 1st survey with respect to Sex and Age group"}, {"mark": "text", "encoding": {"color": {"type": "nominal", "field": "Health", "legend": {"labelAlign": "left", "labelLimit": 0, "offset": -20, "symbolSize": 400, "symbolType": "square", "title": ""}, "scale": {"reverse": true, "scheme": "spectral"}, "sort": {"field": "order", "order": "descending"}}, "opacity": {"condition": {"value": 1, "selection": "selector001"}, "value": 0.2}}, "selection": {"selector001": {"type": "multi", "fields": ["Health"], "bind": "legend"}}}], "data": {"name": "data-25d27272eb4da0513aa451687aa17d9b"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-25d27272eb4da0513aa451687aa17d9b": [{"Age": "16-29", "Health": "Excellent", "Sex": "Men", "Est": 36.5, "lim_inf": 30.2, "lim_sup": 43.3, "M": "Survey 1", "order": 0}, {"Age": "16-29", "Health": "Very Good", "Sex": "Men", "Est": 34.3, "lim_inf": 28.1, "lim_sup": 41.1, "M": "Survey 1", "order": -1}, {"Age": "16-29", "Health": "Good", "Sex": "Men", "Est": 27.3, "lim_inf": 21.6, "lim_sup": 33.8, "M": "Survey 1", "order": -2}, {"Age": "16-29", "Health": "Regular", "Sex": "Men", "Est": 1.9, "lim_inf": 0.7, "lim_sup": 4.9, "M": "Survey 1", "order": -3}, {"Age": "16-29", "Health": "Bad", "Sex": "Men", "Est": 0.0, "lim_inf": 0.0, "lim_sup": 0.0, "M": "Survey 1", "order": -4}, {"Age": "30-44", "Health": "Excellent", "Sex": "Men", "Est": 17.7, "lim_inf": 14.2, "lim_sup": 21.9, "M": "Survey 1", "order": 0}, {"Age": "30-44", "Health": "Very Good", "Sex": "Men", "Est": 29.3, "lim_inf": 25.0, "lim_sup": 34.1, "M": "Survey 1", "order": -1}, {"Age": "30-44", "Health": "Good", "Sex": "Men", "Est": 47.8, "lim_inf": 42.8, "lim_sup": 52.8, "M": "Survey 1", "order": -2}, {"Age": "30-44", "Health": "Regular", "Sex": "Men", "Est": 4.9, "lim_inf": 3.1, "lim_sup": 7.5, "M": "Survey 1", "order": -3}, {"Age": "30-44", "Health": "Bad", "Sex": "Men", "Est": 0.4, "lim_inf": 0.0, "lim_sup": 2.5, "M": "Survey 1", "order": -4}, {"Age": "45-64", "Health": "Excellent", "Sex": "Men", "Est": 9.5, "lim_inf": 7.3, "lim_sup": 12.2, "M": "Survey 1", "order": 0}, {"Age": "45-64", "Health": "Very Good", "Sex": "Men", "Est": 20.4, "lim_inf": 17.2, "lim_sup": 23.9, "M": "Survey 1", "order": -1}, {"Age": "45-64", "Health": "Good", "Sex": "Men", "Est": 54.9, "lim_inf": 50.7, "lim_sup": 59.0, "M": "Survey 1", "order": -2}, {"Age": "45-64", "Health": "Regular", "Sex": "Men", "Est": 13.4, "lim_inf": 10.8, "lim_sup": 16.5, "M": "Survey 1", "order": -3}, {"Age": "45-64", "Health": "Bad", "Sex": "Men", "Est": 1.9, "lim_inf": 1.0, "lim_sup": 3.5, "M": "Survey 1", "order": -4}, {"Age": "65+", "Health": "Excellent", "Sex": "Men", "Est": 4.1, "lim_inf": 2.0, "lim_sup": 8.0, "M": "Survey 1", "order": 0}, {"Age": "65+", "Health": "Very Good", "Sex": "Men", "Est": 15.2, "lim_inf": 10.8, "lim_sup": 21.0, "M": "Survey 1", "order": -1}, {"Age": "65+", "Health": "Good", "Sex": "Men", "Est": 49.6, "lim_inf": 42.5, "lim_sup": 56.7, "M": "Survey 1", "order": -2}, {"Age": "65+", "Health": "Regular", "Sex": "Men", "Est": 27.2, "lim_inf": 21.3, "lim_sup": 34.0, "M": "Survey 1", "order": -3}, {"Age": "65+", "Health": "Bad", "Sex": "Men", "Est": 3.9, "lim_inf": 1.9, "lim_sup": 8.1, "M": "Survey 1", "order": -4}, {"Age": "16-29", "Health": "Excellent", "Sex": "Women", "Est": 20.9, "lim_inf": 16.6, "lim_sup": 26.0, "M": "Survey 1", "order": 0}, {"Age": "16-29", "Health": "Very Good", "Sex": "Women", "Est": 34.3, "lim_inf": 29.0, "lim_sup": 40.0, "M": "Survey 1", "order": -1}, {"Age": "16-29", "Health": "Good", "Sex": "Women", "Est": 37.5, "lim_inf": 32.1, "lim_sup": 43.3, "M": "Survey 1", "order": -2}, {"Age": "16-29", "Health": "Regular", "Sex": "Women", "Est": 7.2, "lim_inf": 4.7, "lim_sup": 11.0, "M": "Survey 1", "order": -3}, {"Age": "16-29", "Health": "Bad", "Sex": "Women", "Est": 0.0, "lim_inf": 0.0, "lim_sup": 0.0, "M": "Survey 1", "order": -4}, {"Age": "30-44", "Health": "Excellent", "Sex": "Women", "Est": 14.3, "lim_inf": 11.4, "lim_sup": 17.8, "M": "Survey 1", "order": 0}, {"Age": "30-44", "Health": "Very Good", "Sex": "Women", "Est": 25.8, "lim_inf": 22.0, "lim_sup": 29.9, "M": "Survey 1", "order": -1}, {"Age": "30-44", "Health": "Good", "Sex": "Women", "Est": 49.9, "lim_inf": 45.4, "lim_sup": 54.4, "M": "Survey 1", "order": -2}, {"Age": "30-44", "Health": "Regular", "Sex": "Women", "Est": 9.0, "lim_inf": 6.7, "lim_sup": 11.9, "M": "Survey 1", "order": -3}, {"Age": "30-44", "Health": "Bad", "Sex": "Women", "Est": 1.0, "lim_inf": 0.4, "lim_sup": 2.4, "M": "Survey 1", "order": -4}, {"Age": "45-64", "Health": "Excellent", "Sex": "Women", "Est": 4.6, "lim_inf": 3.2, "lim_sup": 6.6, "M": "Survey 1", "order": 0}, {"Age": "45-64", "Health": "Very Good", "Sex": "Women", "Est": 15.4, "lim_inf": 12.8, "lim_sup": 18.5, "M": "Survey 1", "order": -1}, {"Age": "45-64", "Health": "Good", "Sex": "Women", "Est": 55.3, "lim_inf": 51.4, "lim_sup": 59.3, "M": "Survey 1", "order": -2}, {"Age": "45-64", "Health": "Regular", "Sex": "Women", "Est": 20.9, "lim_inf": 17.8, "lim_sup": 24.3, "M": "Survey 1", "order": -3}, {"Age": "45-64", "Health": "Bad", "Sex": "Women", "Est": 3.7, "lim_inf": 2.5, "lim_sup": 5.6, "M": "Survey 1", "order": -4}, {"Age": "65+", "Health": "Excellent", "Sex": "Women", "Est": 2.7, "lim_inf": 1.3, "lim_sup": 5.6, "M": "Survey 1", "order": 0}, {"Age": "65+", "Health": "Very Good", "Sex": "Women", "Est": 10.1, "lim_inf": 7.0, "lim_sup": 14.5, "M": "Survey 1", "order": -1}, {"Age": "65+", "Health": "Good", "Sex": "Women", "Est": 46.7, "lim_inf": 40.5, "lim_sup": 52.9, "M": "Survey 1", "order": -2}, {"Age": "65+", "Health": "Regular", "Sex": "Women", "Est": 32.9, "lim_inf": 27.4, "lim_sup": 39.0, "M": "Survey 1", "order": -3}, {"Age": "65+", "Health": "Bad", "Sex": "Women", "Est": 7.6, "lim_inf": 4.9, "lim_sup": 11.6, "M": "Survey 1", "order": -4}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>